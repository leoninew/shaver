import{Q,b as R}from"./use-dark.d85c521f.js";import{e as V}from"./QBtn.251daa3f.js";import{u as q,Q as F,_ as U,c as A}from"./localStorage.38810204.js";import{Q as G,a as L,b as S,c as P,C as M}from"./ClosePopup.668ed691.js";import{f as W,h as E,Q as b}from"./scroll.b5e4fcc4.js";import{T as C,k as D,i as z,c as _}from"./types.1201977b.js";import{d as K,A as Z,r as g,a as X,B as Y,V as ee,D as te,I as le,G as t,F as n,K as ae,H as B,W as T,u as se}from"./index.135a5d6f.js";const oe={[C.Empty]:"object",[C.String]:"string",[C.Number]:"int",[C.Boolean]:"bool"},ne={[C.Empty]:"Object",[C.String]:"String",[C.Number]:"Int32",[C.Boolean]:"Boolean"},H=(m,l)=>{var r;return(r=l?ne[m]:oe[m])!=null?r:m},re=(m,l)=>{let r=m,s=0;for(;r.endsWith("[]");)r=r.substring(0,r.length-2),s+=1;let c=H(r,l);for(let p=0;p<s;p++)c=`${c}[]`;return c};function*ue(m,l){const r=D(m),s=l==null?void 0:l.keepBrief,c=l==null?void 0:l.useClrType,p=l==null?void 0:l.useJsonProperty,v=l==null?void 0:l.useJsonPropertyName,o=l==null?void 0:l.useCamelCasePropertyNamesContractResolver,x=l==null?void 0:l.useCamelCaseJsonNamingPolicy,N=l==null?void 0:l.usePetaPoco,y=[],u=[];let h=0,w=0,i=0;for(const{name:e,type:a}of r){if(!z(a))continue;u.push(`public class ${e}`),u.push("{");const f=a,k=Object.keys(f);for(const d of k){const O=f[d],j=O.endsWith("[]")?re(O,c):H(O,c),J=_(d);if(s&&J===d||!p&&!v){u.push(`    public ${j} ${d} { get; set; }`);continue}p&&(s&&o?_(J,!1)!==d&&(u.push(`    [JsonProperty("${d}")]`),h+=1):(u.push(`    [JsonProperty("${d}")]`),h+=1)),v&&(s&&x?_(J,!1)!==d&&(u.push(`    [JsonPropertyName("${d}")]`),w+=1):(u.push(`    [JsonPropertyName("${d}")]`),w+=1)),N&&(s?_(J,!1)!==d&&(u.push(`    [Column("${d}")]`),i+=1):(u.push(`    [Column("${d}")]`),i+=1)),u.push(`    public ${j} ${J} { get; set; }`)}u.push(`}
`)}h&&y.push("using Newtonsoft.Json;"),w&&y.push("using System.Text.Json.Serialization;"),i&&y.push("using PetaPoco;"),y.length>0&&y.push("");for(const e of y)yield e;for(const e of u)yield e}function*ie(m,l){const r=D(m);for(const{name:s}of r)yield'[ApiController]")]',yield'[Route("[controller]")]',yield`public class ${s}Controller : ControllerBase`,yield"{",yield"    [HttpGet]",yield`    public ${s}ListOutput GetAll()`,yield"    {",yield"        throw new NotImplementException();",yield"    }",yield"",yield"    [HttpGet]",yield`    public ${s}DetailOutput Get(Int32 id)`,yield"    {",yield"        throw new NotImplementException();",yield"    }",yield"",yield"    [HttpPost]",yield`    public Object Post([FromBody] ${s}CreateInput input)`,yield"    {",yield"        throw new NotImplementException();",yield"    }",yield"",yield"    [HttpPut]",yield'    [Route("{id}")]',yield`    public Object Put(Int32 id, [FromBody] ${s}UpdateInput input)`,yield"    {",yield"        throw new NotImplementException();",yield"    }",yield"",yield"    [HttpDelete]",yield'    [Route("{id}")]',yield"    public Boolean Delete(Int32 id)",yield"    {",yield"        throw new NotImplementException();",yield"    }",yield"}",yield""}var de={type:ue,rest:ie};const me={class:"q-pa-md"},ce={class:"q-pa-md"},pe=B("div",{class:"text-h6"},"Settings",-1),he=K({__name:"CSharp",setup(m){const l=Z(),r=q(),s=g(""),c=g(""),p=g(""),v=g(!1),o=g({keepBrief:!0,useClrType:!1,useJsonProperty:!0,useCamelCasePropertyNamesContractResolver:!0,useJsonPropertyName:!1,useCamelCaseJsonNamingPolicy:!1,usePetaPoco:!1}),x=g();X(async()=>{const i=Object.keys(o.value);for(const e of i)r.assign(`/transform/csharp/${e}`,a=>o.value[e]=a);s.value=r.get("/transform/mysql/input")||JSON.stringify({id:1,userId:1,title:"delectus aut autem",completed:!1,created:"2024-01-06T13:39:32.006Z"},null,2),await N(s.value)}),Y(async i=>{await N(s.value,i.query.kind)});const N=async(i,e)=>{var $;p.value="";const a=ee(o.value);r.set("/transform/input",i);try{const f=JSON.parse(i),k=de[e!=null?e:l.query.kind];c.value=($=Array.from(k(f,a)).join(`
`))!=null?$:""}catch(f){if(f instanceof SyntaxError)p.value=f.message;else throw f}},y=async()=>{const i=Object.keys(o.value);for(const e of i)r.set(`/transform/csharp/${e}`,o.value[e]);await N(s.value)},u=async()=>{await x.value.formatDoc()},h=async()=>{s.value=""},w=async()=>{await A(c.value)};return(i,e)=>(te(),le(ae,null,[t(F,{"model-value":50},{before:n(()=>[B("div",me,[t(Q,{class:"text-primary"},{default:n(()=>[t(R,null,{default:n(()=>[T("JSON")]),_:1}),t(V,{flat:"",round:"",dense:"",icon:"format_align_left",onClick:u}),t(V,{flat:"",round:"",dense:"",icon:"delete",onClick:h})]),_:1}),t(U,{text:s.value,"onUpdate:text":e[0]||(e[0]=a=>s.value=a),language:"json",onChanged:N,ref_key:"inputEditor",ref:x},null,8,["text"])])]),after:n(()=>[B("div",ce,[t(Q,{class:"text-primary"},{default:n(()=>[t(R,null,{default:n(()=>[T("C#")]),_:1}),t(V,{flat:"",round:"",dense:"",icon:"settings",onClick:e[1]||(e[1]=a=>v.value=!v.value)}),t(V,{flat:"",round:"",dense:"",icon:"content_copy",onClick:w})]),_:1}),t(U,{text:c.value,language:"csharp"},null,8,["text"])])]),_:1}),t(G,{modelValue:v.value,"onUpdate:modelValue":e[8]||(e[8]=a=>v.value=a),onHide:y},{default:n(()=>[t(W,{style:{width:"60vw","max-width":"80vw"}},{default:n(()=>[t(E,{class:"row items-center q-pb-none"},{default:n(()=>[pe,t(L),se(t(V,{icon:"close",flat:"",round:"",dense:""},null,512),[[M]])]),_:1}),t(E,null,{default:n(()=>[t(S,null,{default:n(()=>[t(b,{header:""},{default:n(()=>[T("Common")]),_:1}),t(b,null,{default:n(()=>[t(P,{modelValue:o.value.keepBrief,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.keepBrief=a),label:"use less attributes"},null,8,["modelValue"]),t(P,{modelValue:o.value.useClrType,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.useClrType=a),label:"use CLR type"},null,8,["modelValue"])]),_:1})]),_:1}),t(S,null,{default:n(()=>[t(b,{header:""},{default:n(()=>[T("Json.Net")]),_:1}),t(b,null,{default:n(()=>[t(P,{modelValue:o.value.useJsonProperty,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.useJsonProperty=a),label:"Add JsonProperty"},null,8,["modelValue"]),t(P,{modelValue:o.value.useCamelCasePropertyNamesContractResolver,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.useCamelCasePropertyNamesContractResolver=a),label:"use CamelCasePropertyNamesContractResolver"},null,8,["modelValue"])]),_:1})]),_:1}),t(S,null,{default:n(()=>[t(b,{header:""},{default:n(()=>[T("System.Text.Json")]),_:1}),t(b,null,{default:n(()=>[t(P,{modelValue:o.value.useJsonPropertyName,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.useJsonPropertyName=a),label:"use JsonPropertyName"},null,8,["modelValue"]),t(P,{modelValue:o.value.useCamelCaseJsonNamingPolicy,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.useCamelCaseJsonNamingPolicy=a),label:"use JsonNamingPolicy.CamelCase"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{he as default};
